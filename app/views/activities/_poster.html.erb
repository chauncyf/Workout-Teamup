<div class="card shadow mb-3" id="poster">
  <div class="card-header px-3 py-2 text-white material-head-<%= activity.theme_color %>">
    <div class="row justify-content-between">
      <div class="col col-auto card-title m-0">
        <ul class="list-inline mb-1">
          <li class="list-inline-item align-middle dropdown" id="card-starter-avatar" data-avatar-pop="<%= activity.starter.id %>" data-toggle="dropdown">
            <%= avatar_for(activity.starter) %>
            <div class="dropdown-menu p-0" id="profile-dropdown">...</div>
          </li>
          <li class="list-inline-item align-middle">
            <ul class="list-unstyled">
              <li id="activity-starter-name"><%= activity.starter.user_name %></li>
              <li id="activity-update-date"><%= activity.updated_at.strftime("%m/%d %H:%M") %></li>
            </ul>
          </li>
        </ul>
      </div>

      <%# if activity joined  %>
      <!--        <div class="col col-auto fas fa-check"></div>-->
      <%# end %>
      <div class="col col-auto card-title card-title-button text-right m-0">
        <% if !logged_in? %>
          <%= link_to "", login_path, {remote: true, 'data-toggle': "modal", 'data-target': "#login", class: "fas fa-ellipsis-v text-white"} %>
        <% else %>
          <%#= link_to "", "/join_activity/#{activity.id}", class: "fas fa-plus", method: :post %>
          <div class="dropleft">
            <a class="fas fa-ellipsis-v" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></a>
            <div class="dropdown-menu dropdown-menu-right shadow-lg" aria-labelledby="dropdownMenuButton">
              <%= link_to "Join Activity", "/join_activity/#{activity.id}", remote: true, class: "dropdown-item", method: :post %>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Follow <%= activity.starter.user_name %></a>
              <a class="dropdown-item" href="#">Email <%= activity.starter.user_name %></a>
            </div>
          </div>
        <% end %>
      </div>
    </div>

    <div class="card-title card-title-date m-0">
      <i class="fas fa-calendar"></i>
      <%= activity.activity_date.strftime("%b %d, %a %H:%M") %>
    </div>
    <div class="card-title card-title-place m-0">
      <i class="fas fa-map-marker-alt"></i>
      <%= activity.place %>
    </div>
  </div>

  <div class="card-body p-3 material-body-<%= activity.theme_color %> ">
    <%= activity.content %>
  </div>

  <div class="card-footer bg-transparent px-3 pt-0 material-footer-<%= activity.theme_color %>">
    <div class="">
      <% unless !logged_in? || activity.get_participation_by_user_id(current_user.id).size == 0 %>
        <div class="col-auto text-left rate-star" data-raty="true"
             <%= activity.get_participation_by_user_id(current_user.id).first.rating != 0 ? "data-readonly='true'" : "" %>
             data-id="<%= activity.get_participation_by_user_id(current_user.id).first.id %>"
             data-score="<%= activity.get_participation_by_user_id(current_user.id).first.rating %>"
        ></div>
      <% end %>
      <div class="col-auto text-right comment_box">
        <a class="like"><i class="far fa-heart"></i></a>
        <a class="comment" data-id="<%= activity.id %>"><i class="far fa-comment"></i></a>
      </div>
      <div class="reviews">
        <div class="card card-body">
          comment list
        </div>
      </div>
    </div>
  </div>
</div>

<script>
    ratyAll()// make sure every raty is transformed
</script>